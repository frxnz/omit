<!doctype html>
<html class="no-js" lang="">

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sass, Gulp, Source Maps, and You</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A blog written by Derek Wheelden about front-end web development, CSS, JavaScript, and lots of other things.">
    <link rel="canonical" href="http://omit.io/2014/05/24/sass-gulp-sourcemaps-and-you/">

    <style>
        h1,.post-list a{font-family:"league-gothic", sans-serif;font-weight:normal}body{font-family:"ff-tisa-web-pro", serif;font-weight:normal;font-style:normal}header h1{font-family:"ff-tisa-web-pro", serif;font-weight:bold;font-style:normal}pre[class*="language-"]:before,h2,h3,h4,h5,h6,.post-list time,article.post .meta{font-family:"source-sans-pro", sans-serif;font-weight:100;font-style:normal}code[class*="language-"],pre[class*="language-"],:not(pre)>code,footer a{font-family:"fira-mono", monospace}/*! normalize.css v3.0.1 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}code[class*="language-"],pre[class*="language-"]{position:relative;font-size:0.9em;line-height:1.2;color:#f8f8f2;text-shadow:0 1px rgba(0,0,0,0.3);direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*="language-"]{padding:3em 1em 1em;margin:.5em 0;overflow:auto}pre[class*="language-"]:before{content:attr(title);display:block;position:absolute;top:0;left:0;width:100%;padding:0.75em 1em;background:#fd6366;text-shadow:none;text-transform:uppercase;text-align:center}:not(pre)>code[class*="language-"],pre[class*="language-"]{background:#272822}:not(pre)>code[class*="language-"]{padding:.1em;border-radius:.3em}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.property,.token.tag,.token.constant,.token.symbol{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.selector,.token.attr-name,.token.string,.token.builtin{color:#a6e22e}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value{color:#e6db74}.token.keyword{color:#66d9ef}.token.regex,.token.important{color:#fd971f}.token.important{font-weight:bold}.token.entity{cursor:help}.token a{color:inherit}*,*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{width:100%;height:100%;font-size:62.5%}body{background:#fff;font-size:2em;line-height:1.5;color:#4c3e3e;overflow-x:hidden}@media (max-width: 767px){body{font-size:1.5em}}a{text-decoration:none;color:#fd6366}header{margin-bottom:2em;padding:2em;background:#f8f7f7;text-align:center}header h1{margin:0;font-size:5em;text-transform:uppercase}.content{width:90%;max-width:40em;min-height:100%;margin:0 auto -10em;padding-bottom:20em}.content img{max-width:100%}.content .vine-embed{display:block;max-width:100%;margin:2em auto}h1{font-size:3em;text-transform:uppercase}h2{margin:0.5em 0;font-size:2em}h3{font-size:1.5em;color:#fd6366}:not(pre)>code{background:#f8f7f7;white-space:nowrap;font-size:0.8em}.post-list{list-style:none;margin:0;padding:0;line-height:1.2}.post-list li{margin-bottom:2em}.post-list a{display:block;font-size:3em;text-transform:uppercase;color:#4c3e3e}.post-list time{color:#cabebf}article.post{margin-bottom:5em}article.post h1{margin:0;font-size:4em;line-height:1}article.post .meta{color:#cabebf}.hero-image{width:150%;height:35vh;min-height:18em;margin:2em -25%;-webkit-background-size:cover;background-size:cover;background-position:center}footer{position:relative;width:100%;height:10em;padding:3em 10%;background:#fd6366;line-height:5;text-align:center;z-index:1000}footer a{color:white}

    </style>

    <script type="text/javascript" src="//use.typekit.net/bcg6ekf.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>


    <body>

        <div class="outer-wrapper">

            <header>
                <h1>
                    <a href="/">Omit</a>
                </h1>
            </header>

            <div class="content">
                <article class="post">

    <h1>Sass, Gulp, Source Maps, and You</h1>
    <p class="meta">May 24, 2014</p>

    <p>I’ve been using Gulp for my projects lately, and one of the most important
features for me is the ability to compile Sass. I use a lot of the newer
features of Sass, and I’ve run into a few issues.</p>

<p>If you just want to see how I use Sass 3.3 with Gulp, here is a gist of the
<a href="https://gist.github.com/frxnz/ab278e1d7d6088fdb64c">gulpfile I use for this site</a>.</p>

<h2 id="so-you-want-the-latest-features-of-sass">So you want the latest features of Sass</h2>

<p>Sass 3.3 was released in March, and along with it a ton of great new features.
You can read about many of them on the
<a href="http://blog.sass-lang.com/posts/184094-sass-33-is-released">Sass blog</a> or you
can see all of them in the
<a href="http://sass-lang.com/documentation/file.SASS_CHANGELOG.html#330_7_March_2014">changelog</a>.
What you’re probably interested in, though, is how you can get the most out of
these new features in your current workflow, or you’re getting started and you
want to make sure you can use these new features.</p>

<p>Build tools like Gulp allow us to create tasks to automate a lot of
the things we’ve had to do manually, or with a slew of third-party apps and
command lines, or things that we just couldn’t do. If you’re using a build tool
already, you’re probably even using it to compile Sass. What you may not realize
is you’re probably missing out on some things.</p>

<h2 id="libsass-to-the-rescue">Libsass to the rescue?</h2>

<p>With Gulp there are two ways to compile Sass. You can use the Ruby compiler, or
you can use the Node implementation of Libsass. If you’re not familiar with
Libsass, it is a port of Sass written in C/C++. The benefit of using Libsass in
Node is that it runs faster, and conforms to Node standard practices. This is
great for things like Gulp, because it’s very easy to implement.</p>

<p>Libsass is under active development, and is backed by Moovweb, but it’s still
playing catch-up. There are actually features from Sass 3.2 that haven’t been
implemented yet, and as of now 3.3 are
<a href="http://www.solitr.com/blog/2014/01/state-of-libsass/">not a priority</a>. So if
you want to take advantage of the newest features of Sass, Libsass is probably
not for you.</p>

<h2 id="ok-so-ruby-then-great">Ok so Ruby then, great?</h2>

<p>Gulp has two Sass plugins: <code>gulp-sass</code> and <code>gulp-ruby-sass</code>. For those of us
wanting Sass 3.3 features, <code>gulp-ruby-sass</code> is where it’s at. For the most
part it really gets the job done, but there are a couple caveats. First it might
help to understand how <code>gulp-ruby-sass</code> works under the hood.</p>

<p>The plugin actually executes the Ruby command-line command using Node’s <code>spawn</code>.
This is great because it means you’re using exactly the compiler that Sass was
built to use. Since Gulp is stream based—meaning it doesn’t work on files
directly—the plugin has to do a little bit of trickery. Essentially what
happens is the plugin moves the Sass file in question to the system’s temp
directory, runs the Ruby command on that, grabs the contents of the output, and
pipes that back to Gulp as a stream.</p>

<p>This has 2 major implications. First, it’s kind of slow, especially when you get
into larger projects. I have a project now that takes about 6s to compile.
Second, source maps get a little weird.</p>

<h2 id="lets-talk-about-source-maps">Let’s talk about source maps</h2>

<p>Source maps are great, and as far as I’m concerned they’re the best feature of
Sass 3.3. In recent version of Chrome and Firefox dev tools, you actually see
the partial that contains the code for the styles on the element you’re
inspecting. This makes it a lot easier to find exactly where some code you’re
debugging lives. If your source maps are built correctly, you can even click
on the partial name in Chrome and see the code right there. <em>If your source maps
are built correctly.</em></p>

<p>Remember when I said <code>gulp-ruby-sass</code> was working on files copied over to the
system temp directory? Yea, that causes some issues. Source maps normally
contain relative paths to the files being concatenated. So you’d normally see
something like <code>../scss/modules/_widget.scss</code>. When you start moving things into
those temp folders, the paths start to look more like
<code>../../../../project/scss/modules/_widget.scss</code>. Not good.</p>

<p>There is <a href="https://github.com/sindresorhus/gulp-ruby-sass/issues/17">an open issue</a>
on GitHub, but it might be a while before the problem is resolved. In the
meantime, this isn’t really a dealbreaker. You’ll still get your partial names
and line numbers, you just won’t be able to see the code in Chrome. Certainly
better than nothing.</p>

<h2 id="speed-vs-features">Speed vs. Features</h2>

<p><code>gulp-ruby-sass</code> is not perfect, but even with it’s flaws, it is much more
feature-rich than it’s libsass brother. What it really comes down to is whether
you need fast compilation, or the latest features of Sass. For me, even it’s it
slightly-broken state, source maps are worth a couple extra seconds of
compilation time.</p>


</article>
            </div>

            <footer>
                <a href="http://twitter.com/frxnz">Derek Wheelden</a>
            </footer>

        </div>

        <script src="/js/vendor/prism.js"></script>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-45033941-1', 'auto');
            ga('send', 'pageview');
        </script>
        
    </body>
</html>
